TARGETNAME=winApiRemoting
TARGETTYPE=DRIVER

# Driver type - kernel mode driver
DRIVERTYPE=WDM

# Include directories
INCLUDES=..\..\..\common

# Source files
SOURCES=vmbus_privder.c \
        api_handlers.c

# Libraries
TARGETLIBS=$(DDK_LIB_PATH)\ntoskrnl.lib \
          $(DDK_LIB_PATH)\hal.lib \
          $(DDK_LIB_PATH)\wmilib.lib \
          $(DDK_LIB_PATH)\vmbuskmcl.lib

# Compiler options
MSC_WARNING_LEVEL=/W3
C_DEFINES=$(C_DEFINES) -D_WIN64 -DWINNT=1

# Disable Spectre mitigation
USER_C_FLAGS=$(USER_C_FLAGS) /Qspectre-